<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <title>FastWoke Protocol (Alpha)</title>
    <style>
        body {
            font-family: monospace;
            background: #0d1117;
            color: #c9d1d9;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            color: #58a6ff;
            border-bottom: 1px solid #30363d;
            padding-bottom: 10px;
        }

        .card {
            background: #161b22;
            border: 1px solid #30363d;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
        }

        button {
            background: #238636;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-family: monospace;
            font-size: 16px;
            border-radius: 4px;
        }

        button:hover {
            background: #2ea043;
        }

        input {
            background: #0d1117;
            border: 1px solid #30363d;
            color: white;
            padding: 8px;
            width: 90%;
            font-family: monospace;
            margin-top: 5px;
        }

        label {
            display: block;
            margin-top: 10px;
            color: #8b949e;
        }

        .highlight {
            color: #f2cc60;
        }

        .hidden {
            display: none;
        }

        .success {
            color: #56ff69;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <h1>üåë FastWoke: Reverse Debt Console</h1>

    <div class="card">
        <h2>1. Creditor Zone (‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ)</h2>
        <p>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÅ‡∏•‡∏∞‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏á‡∏¥‡∏ô Nano (Escrow)</p>
        <button onclick="createJob()">‚ö° Create Job Contract</button>

        <div id="result-create" class="hidden">
            <label>Job Address (‡πÇ‡∏≠‡∏ô Nano ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà):</label>
            <input type="text" id="job-address" readonly class="highlight">

            <label>üîë My Share (‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÄ‡∏≠‡∏á):</label>
            <input type="text" id="share-creditor" readonly>

            <label>üì® Debtor Share (‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ):</label>
            <input type="text" id="share-debtor" readonly>
            <p style="font-size: 12px; color: #ff7b72;">*‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡πÉ‡∏ô‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á Debtor Share ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á</p>
        </div>
    </div>

    <div class="card">
        <h2>2. Debtor Zone (‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ)</h2>
        <p>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ‡∏Å‡∏î Approve ‡πÉ‡∏´‡πâ‡∏ô‡∏≥‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏ó‡∏±‡πâ‡∏á 2 ‡∏™‡πà‡∏ß‡∏ô‡∏°‡∏≤‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ö‡∏¥‡∏Å‡πÄ‡∏á‡∏¥‡∏ô</p>

        <label>Share A (‡∏à‡∏≤‡∏Å‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ):</label>
        <input type="text" id="input-share-a" placeholder="‡∏ß‡∏≤‡∏á My Share ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô...">

        <label>Share B (‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á):</label>
        <input type="text" id="input-share-b" placeholder="‡∏ß‡∏≤‡∏á Debtor Share ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô...">

        <br><br>
        <button onclick="unlockFunds()">üîì Unlock & Claim Funds</button>

        <div id="result-unlock" class="hidden">
            <p id="unlock-msg"></p>
            <label>Recovered Seed (‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à):</label>
            <input type="text" id="recovered-seed" readonly class="success">
        </div>
    </div>

    <script>
        async function createJob() {
            const res = await fetch('/api/create-job', { method: 'POST' });
            const data = await res.json();

            document.getElementById('job-address').value = data.address;
            document.getElementById('share-creditor').value = data.shareCreditor;
            document.getElementById('share-debtor').value = data.shareDebtor;
            document.getElementById('result-create').classList.remove('hidden');
        }

        async function unlockFunds() {
            const shareA = document.getElementById('input-share-a').value;
            const shareB = document.getElementById('input-share-b').value;

            const res = await fetch('/api/unlock', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ shareA, shareB })
            });
            const data = await res.json();

            const resultDiv = document.getElementById('result-unlock');
            resultDiv.classList.remove('hidden');

            if (data.success) {
                document.getElementById('unlock-msg').innerHTML = "‚úÖ SUCCESS! ‡πÄ‡∏á‡∏¥‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß";
                document.getElementById('unlock-msg').className = "success";
                document.getElementById('recovered-seed').value = data.recoveredSeed;
            } else {
                document.getElementById('unlock-msg').innerText = "‚ùå FAILED: " + data.error;
                document.getElementById('unlock-msg').style.color = "red";
            }
        }
    </script>
</body>

</html>